# Kudos Bot üéâ

A Slack bot that allows team members to give kudos to each other with AI-generated encouraging messages powered by Google Gemini.

## Features

- **Give Kudos**: Mention a user with `@username ++` to give them kudos
- **AI Messages**: Each kudos comes with a personalized, encouraging message generated by Google Gemini
- **Kudos Tracking**: Tracks total kudos count for each user
- **Leaderboard**: View top kudos recipients
- **Kudos History**: Logs who gave kudos, when, and with what message

## Setup

### 1. Install Dependencies

```bash
pip install -r requirements.txt
```

### 2. Configure Environment Variables

Create a `.env` file in the project root with the following variables:

```env
# Slack Configuration
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_APP_TOKEN=xapp-your-app-token
SLACK_SIGNING_SECRET=your-signing-secret

# Database
DB_PATH=./kudos.db

# Google Gemini API
GEMINI_API_KEY=your-gemini-api-key
```

#### Getting Your Slack Credentials:

1. Go to [api.slack.com/apps](https://api.slack.com/apps)
2. Create a new app or select an existing one
3. Enable Socket Mode and generate an App-Level Token (`SLACK_APP_TOKEN`)
4. Install the app to your workspace to get the Bot Token (`SLACK_BOT_TOKEN`)
5. Get the Signing Secret from Basic Information (`SLACK_SIGNING_SECRET`)

**Required Bot Token Scopes:**
- `app_mentions:read`
- `chat:write`
- `users:read`

**Required Event Subscriptions:**
- `app_mention`
- `message.channels`

#### Getting Your Gemini API Key:

1. Go to [Google AI Studio](https://aistudio.google.com/app/apikey)
2. Create a new API key
3. Add it to your `.env` file as `GEMINI_API_KEY`

### 3. Run the Bot

```bash
python main.py
```

## Usage

### Give Kudos

Mention a user with `++` to give them kudos:

```
@alice ++ Great job on the presentation!
```

The bot will respond with:
```
‚ú® @alice now has 5 kudos! üéâ
Your presentation skills are truly inspiring! Keep shining! ‚≠ê
```

### View Leaderboard

Mention the bot with "leaderboard":

```
@kudosbot leaderboard
```

### Get Help

Mention the bot:

```
@kudosbot
```

## Project Structure

```
kudos_bot/
‚îú‚îÄ‚îÄ main.py                 # Main bot application
‚îú‚îÄ‚îÄ gemini_message.py       # Google Gemini integration
‚îú‚îÄ‚îÄ requirements.txt        # Python dependencies
‚îú‚îÄ‚îÄ .env                    # Environment variables (not in git)
‚îú‚îÄ‚îÄ kudos.db               # SQLite database (auto-created)
‚îî‚îÄ‚îÄ README.md              # This file
```

## Database Schema

### `kudos` Table
- `user_id` (TEXT, PRIMARY KEY): Slack user ID
- `count` (INTEGER): Total kudos count

### `kudos_log` Table
- `id` (INTEGER, PRIMARY KEY): Auto-incrementing ID
- `receiver_id` (TEXT): User who received kudos
- `giver_id` (TEXT): User who gave kudos
- `message` (TEXT): Optional message with kudos
- `timestamp` (DATETIME): When kudos was given

## AI Message Generation

The bot uses Google Gemini to generate personalized, encouraging messages. The AI considers:
- The kudos message (if provided)
- The recipient's total kudos count
- Context about the giver and receiver (optional)

If the Gemini API is unavailable, the bot falls back to a set of predefined encouraging messages.

## Development

### Testing the Gemini Integration

You can test the message generation directly:

```bash
python gemini_message.py
```

This will generate a sample message and print it to the console.

## License

MIT
